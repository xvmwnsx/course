{% extends 'base.html' %}
{% block title %}Редактирование экзамена{% endblock %}
{% block content %}
{% load static %}
{% load custom_filters %}

<link rel="stylesheet" type="text/css" href="{% static 'css/edit_exam.css' %}">
<h2>Выставить оценки по экзамену: {{ subject.name }}</h2>

<form method="post">
  {% csrf_token %}
  <table>
    <tr>
      <th>Студент</th>
      <th>Оценка</th>
    </tr>
    {% for student in students %}
    <tr>
      <td>{{ student.surname }} {{ student.first_name }} {{ student.last_name }} </td>
      <td>
        <select name="status_{{ student.id }}">
          <option value="">---</option>
          {% for value, label in EXAM_CHOICES %}
            {% with exam=exam_dict|get_item:student.id %}
              <option value="{{ value }}" {% if exam and exam.status == value %}selected{% endif %}>
                {{ label }}
              </option>
            {% endwith %}
          {% endfor %}
        </select>
      </td>
    </tr>
    {% endfor %}
  </table>
  <button type="submit">Сохранить</button>
</form>

{% endblock %}
